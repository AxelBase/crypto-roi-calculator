import{f as fe,a as de}from"../chunks/BWRq0iBX.js";import"../chunks/BJPa6rxK.js";import{o as Se}from"../chunks/DPHNAE3X.js";import{B as Ie,a1 as qe,F as G,a3 as Pe,a4 as xe,a5 as we,t as Ne,G as $e,V as De,m as g,X as j,Z as i,$ as d,g as e,Y as Fe,s as o,a6 as Ue,_ as r,a0 as y}from"../chunks/BNvSiiR1.js";import{e as ce,s as ke}from"../chunks/ClsrMDeT.js";import{i as Ce}from"../chunks/We2YgEXQ.js";import{t as ve,f as Be,a as Oe}from"../chunks/BNNPLpms.js";import{r as I,s as Re}from"../chunks/CIIDwUtI.js";import{b as q,p as Ee}from"../chunks/BdMmLftD.js";import{i as Ge}from"../chunks/vtwZU9sB.js";import{s as je,a as He}from"../chunks/ArlqSc5A.js";import{b as ue}from"../chunks/DFzux4oR.js";import{g as Je}from"../chunks/DcNdwwVU.js";function me(a,l,m=!1){if(a.multiple){if(l==null)return;if(!Pe(l))return xe();for(var f of a.options)f.selected=l.includes(P(f));return}for(f of a.options){var h=P(f);if(we(h,l)){f.selected=!0;return}}(!m||l!==void 0)&&(a.selectedIndex=-1)}function Le(a){var l=new MutationObserver(()=>{me(a,a.__value)});l.observe(a,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),Ne(()=>{l.disconnect()})}function Me(a,l,m=l){var f=new WeakSet,h=!0;Ie(a,"change",s=>{var c=s?"[selected]":":checked",n;if(a.multiple)n=[].map.call(a.querySelectorAll(c),P);else{var u=a.querySelector(c)??a.querySelector("option:not([disabled])");n=u&&P(u)}m(n),G!==null&&f.add(G)}),qe(()=>{var s=l();if(a===document.activeElement){var c=$e??G;if(f.has(c))return}if(me(a,s,h),h&&s===void 0){var n=a.querySelector(":checked");n!==null&&(s=P(n),m(s))}a.__value=s,h=!1}),Le(a)}function P(a){return"__value"in a?a.__value:a.value}function We(a){return function(...l){var m=l[0];return m.preventDefault(),a?.apply(this,l)}}var Ae=fe('<div class="alert alert-danger shadow-sm rounded-4" role="alert"><i class="bi bi-exclamation-triangle-fill me-2"></i> </div>'),Qe=fe('<div class="container mt-5 pt-3"><div class="row justify-content-center"><div class="col-lg-8 col-xl-7"><div class="glass-card p-4 p-md-5"><h2 class="text-center mb-4 fw-bold"><i class="bi bi-calculator-fill me-2" style="color: var(--color-accent);"></i> Investment Inputs</h2> <!> <form class="d-flex flex-column gap-3"><div class="form-floating"><select class="form-select" id="currency"><option>USD ($)</option><option>EUR (€)</option><option>GBP (£)</option></select> <label for="currency">Currency</label></div> <div class="row g-3"><div class="col-md-6"><div class="form-floating"><input type="number" class="form-control" id="initialInvestment" required min="0.01" step="0.01" placeholder="0.00"/> <label for="initialInvestment">Initial Investment</label></div></div> <div class="col-md-6"><div class="form-floating"><input type="number" class="form-control" id="quantity" required min="0.01" step="0.01" placeholder="0.00"/> <label for="quantity">Quantity (Units)</label></div></div></div> <div class="row g-3"><div class="col-md-6"><div class="form-floating"><input type="number" class="form-control" id="purchasePrice" required min="0.01" step="0.01" placeholder="0.00"/> <label for="purchasePrice">Buy Price (Per Unit)</label></div></div> <div class="col-md-6"><div class="form-floating"><input type="number" class="form-control" id="salePrice" required min="0.01" step="0.01" placeholder="0.00"/> <label for="salePrice">Sell Price (Per Unit)</label></div></div></div> <div class="p-3 rounded-4" style="background: rgba(255,255,255,0.3); border: 1px dashed var(--glass-border);"><h6 class="text-muted mb-3"><i class="bi bi-sliders me-1"></i> Optional Details</h6> <div class="row g-3"><div class="col-md-6"><div class="form-floating"><input type="number" class="form-control" id="fees" min="0" step="0.01" placeholder="0.00"/> <label for="fees">Total Fees</label></div></div> <div class="col-md-6"><div class="form-floating"><input type="number" class="form-control" id="holdingPeriodDays" min="0" step="1" placeholder="0"/> <label for="holdingPeriodDays">Holding Days</label></div></div></div></div> <div class="d-grid gap-2 mt-2"><button type="submit" class="btn btn-primary btn-lg shadow-lg">Calculate ROI <i class="bi bi-arrow-right-circle-fill ms-2"></i></button></div></form> <div class="d-flex justify-content-between mt-4 pt-3 border-top border-light"><a class="btn btn-link text-decoration-none text-muted"><i class="bi bi-arrow-left"></i> Back Home</a> <button class="btn btn-sm btn-outline-secondary rounded-pill px-3"><i class="bi bi-trash3"></i> Clear Cache</button></div></div></div></div></div>');function sa(a,l){De(l,!1);const m=()=>je(Ee,"$page",f),[f,h]=He(),s=m().url.searchParams;let c=g(s.get("initial")||""),n=g(s.get("purchase")||""),u=g(s.get("sale")||""),p=g(s.get("qty")||""),b=g(s.get("fees")||""),_=g(s.get("days")||""),S=g(s.get("currency")||"USD"),x=g("");Se(()=>{const t=localStorage.getItem("lastCalculation");if(t&&!s.toString())try{const v=JSON.parse(t);confirm("Welcome back! Restore your last calculation?")&&(o(c,v.initial||""),o(n,v.purchase||""),o(u,v.sale||""),o(p,v.qty||""),o(b,v.fees||""),o(_,v.days||""),o(S,v.currency||"USD"))}catch{console.warn("Failed to load saved calculation")}});function pe(){return!e(c)||isNaN(e(c))||parseFloat(e(c))<=0?"Invalid initial investment.":!e(n)||isNaN(e(n))||parseFloat(e(n))<=0?"Invalid purchase price.":!e(u)||isNaN(e(u))||parseFloat(e(u))<=0?"Invalid sale price.":!e(p)||isNaN(e(p))||parseFloat(e(p))<=0?"Invalid quantity.":e(b)&&(isNaN(e(b))||parseFloat(e(b))<0)?"Invalid fees.":e(_)&&(isNaN(e(_))||parseFloat(e(_))<0)?"Invalid holding period.":null}function be(){if(o(x,pe()),e(x))return;const t=new URLSearchParams({initial:e(c),purchase:e(n),sale:e(u),qty:e(p),fees:e(b)||"0",days:e(_)||"0",currency:e(S)});localStorage.setItem("lastCalculation",JSON.stringify({initial:e(c),purchase:e(n),sale:e(u),qty:e(p),fees:e(b)||"0",days:e(_)||"0",currency:e(S)})),Je(`${ue}/results?${t.toString()}`)}function _e(){localStorage.removeItem("lastCalculation"),alert("Saved calculation cleared.")}Ge();var N=Qe(),H=i(N),J=i(H),$=i(J),L=d(i($),2);{var ge=t=>{var v=Ae(),he=d(i(v));r(v),j(()=>ke(he,` ${e(x)??""}`)),ve(3,v,()=>Oe),de(t,v)};Ce(L,t=>{e(x)&&t(ge)})}var w=d(L,2),D=i(w),F=i(D);j(()=>{e(S),Ue(()=>{})});var U=i(F);U.value=U.__value="USD";var k=d(U);k.value=k.__value="EUR";var M=d(k);M.value=M.__value="GBP",r(F),y(2),r(D);var C=d(D,2),B=i(C),W=i(B),A=i(W);I(A),y(2),r(W),r(B);var Q=d(B,2),T=i(Q),V=i(T);I(V),y(2),r(T),r(Q),r(C);var O=d(C,2),R=i(O),X=i(R),Y=i(X);I(Y),y(2),r(X),r(R);var Z=d(R,2),z=i(Z),K=i(z);I(K),y(2),r(z),r(Z),r(O);var ee=d(O,2),ae=d(i(ee),2),E=i(ae),ie=i(E),re=i(ie);I(re),y(2),r(ie),r(E);var te=d(E,2),le=i(te),se=i(le);I(se),y(2),r(le),r(te),r(ae),r(ee),y(2),r(w);var ne=d(w,2),oe=i(ne),ye=d(oe,2);r(ne),r($),r(J),r(H),r(N),j(()=>Re(oe,"href",`${ue??""}/`)),Me(F,()=>e(S),t=>o(S,t)),q(A,()=>e(c),t=>o(c,t)),q(V,()=>e(p),t=>o(p,t)),q(Y,()=>e(n),t=>o(n,t)),q(K,()=>e(u),t=>o(u,t)),q(re,()=>e(b),t=>o(b,t)),q(se,()=>e(_),t=>o(_,t)),ce("submit",w,We(be)),ce("click",ye,_e),ve(1,$,()=>Be,()=>({y:30,duration:800})),de(a,N),Fe(),h()}export{sa as component};
