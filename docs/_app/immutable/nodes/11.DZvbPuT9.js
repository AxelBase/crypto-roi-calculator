import{f as fa,a as da}from"../chunks/Dus1rnU8.js";import"../chunks/Chzl3r_k.js";import{o as Sa}from"../chunks/Dfll2kNf.js";import{$ as Ia,ad as qa,m as G,u as Pa,af as xa,ag as wa,G as Na,a2 as $a,a5 as Da,q as g,a7 as j,a9 as i,ab as d,d as a,a8 as Ua,K as o,ah as ka,aa as r,ac as y}from"../chunks/wXv4P7XI.js";import{e as ca,s as Fa}from"../chunks/Dmbb-7lj.js";import{i as Ca}from"../chunks/CGk0kXJ_.js";import{t as va,f as Oa,a as Ra}from"../chunks/BDSvQ8Rb.js";import{r as I,s as Ba}from"../chunks/CNdQpoeT.js";import{b as q,p as Ea}from"../chunks/Bqw06FnA.js";import{i as Ga}from"../chunks/tpVvojZp.js";import{s as ja,a as Ha}from"../chunks/DJfbtsV0.js";import{b as ua}from"../chunks/CRhzp5od.js";import{g as Ja}from"../chunks/Bn1UhBMm.js";function ma(e,l,m=!1){if(e.multiple){if(l==null)return;if(!Pa(l))return xa();for(var f of e.options)f.selected=l.includes(P(f));return}for(f of e.options){var h=P(f);if(wa(h,l)){f.selected=!0;return}}(!m||l!==void 0)&&(e.selectedIndex=-1)}function La(e){var l=new MutationObserver(()=>{ma(e,e.__value)});l.observe(e,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),Na(()=>{l.disconnect()})}function Ma(e,l,m=l){var f=new WeakSet,h=!0;Ia(e,"change",s=>{var c=s?"[selected]":":checked",n;if(e.multiple)n=[].map.call(e.querySelectorAll(c),P);else{var u=e.querySelector(c)??e.querySelector("option:not([disabled])");n=u&&P(u)}m(n),G!==null&&f.add(G)}),qa(()=>{var s=l();if(e===document.activeElement){var c=$a??G;if(f.has(c))return}if(ma(e,s,h),h&&s===void 0){var n=e.querySelector(":checked");n!==null&&(s=P(n),m(s))}e.__value=s,h=!1}),La(e)}function P(e){return"__value"in e?e.__value:e.value}function Wa(e){return function(...l){var m=l[0];return m.preventDefault(),e?.apply(this,l)}}var Aa=fa('<div class="alert alert-danger shadow-sm rounded-4" role="alert"><i class="bi bi-exclamation-triangle-fill me-2"></i> </div>'),Ka=fa('<div class="container mt-5 pt-3"><div class="row justify-content-center"><div class="col-lg-8 col-xl-7"><div class="glass-card p-4 p-md-5"><h2 class="text-center mb-4 fw-bold"><i class="bi bi-calculator-fill me-2" style="color: var(--color-accent);"></i> Investment Inputs</h2> <!> <form class="d-flex flex-column gap-3"><div class="form-floating"><select class="form-select" id="currency"><option>USD ($)</option><option>EUR (€)</option><option>GBP (£)</option></select> <label for="currency">Currency</label></div> <div class="row g-3"><div class="col-md-6"><div class="form-floating"><input type="number" class="form-control" id="initialInvestment" required min="0.01" step="0.01" placeholder="0.00"/> <label for="initialInvestment">Initial Investment</label></div></div> <div class="col-md-6"><div class="form-floating"><input type="number" class="form-control" id="quantity" required min="0.01" step="0.01" placeholder="0.00"/> <label for="quantity">Quantity (Units)</label></div></div></div> <div class="row g-3"><div class="col-md-6"><div class="form-floating"><input type="number" class="form-control" id="purchasePrice" required min="0.01" step="0.01" placeholder="0.00"/> <label for="purchasePrice">Buy Price (Per Unit)</label></div></div> <div class="col-md-6"><div class="form-floating"><input type="number" class="form-control" id="salePrice" required min="0.01" step="0.01" placeholder="0.00"/> <label for="salePrice">Sell Price (Per Unit)</label></div></div></div> <div class="p-3 rounded-4" style="background: rgba(255,255,255,0.3); border: 1px dashed var(--glass-border);"><h6 class="text-muted mb-3"><i class="bi bi-sliders me-1"></i> Optional Details</h6> <div class="row g-3"><div class="col-md-6"><div class="form-floating"><input type="number" class="form-control" id="fees" min="0" step="0.01" placeholder="0.00"/> <label for="fees">Total Fees</label></div></div> <div class="col-md-6"><div class="form-floating"><input type="number" class="form-control" id="holdingPeriodDays" min="0" step="1" placeholder="0"/> <label for="holdingPeriodDays">Holding Days</label></div></div></div></div> <div class="d-grid gap-2 mt-2"><button type="submit" class="btn btn-primary btn-lg shadow-lg">Calculate ROI <i class="bi bi-arrow-right-circle-fill ms-2"></i></button></div></form> <div class="d-flex justify-content-between mt-4 pt-3 border-top border-light"><a class="btn btn-link text-decoration-none text-muted"><i class="bi bi-arrow-left"></i> Back Home</a> <button class="btn btn-sm btn-outline-secondary rounded-pill px-3"><i class="bi bi-trash3"></i> Clear Cache</button></div></div></div></div></div>');function se(e,l){Da(l,!1);const m=()=>ja(Ea,"$page",f),[f,h]=Ha(),s=m().url.searchParams;let c=g(s.get("initial")||""),n=g(s.get("purchase")||""),u=g(s.get("sale")||""),p=g(s.get("qty")||""),b=g(s.get("fees")||""),_=g(s.get("days")||""),S=g(s.get("currency")||"USD"),x=g("");Sa(()=>{const t=localStorage.getItem("lastCalculation");if(t&&!s.toString())try{const v=JSON.parse(t);confirm("Welcome back! Restore your last calculation?")&&(o(c,v.initial||""),o(n,v.purchase||""),o(u,v.sale||""),o(p,v.qty||""),o(b,v.fees||""),o(_,v.days||""),o(S,v.currency||"USD"))}catch{console.warn("Failed to load saved calculation")}});function pa(){return!a(c)||isNaN(a(c))||parseFloat(a(c))<=0?"Invalid initial investment.":!a(n)||isNaN(a(n))||parseFloat(a(n))<=0?"Invalid purchase price.":!a(u)||isNaN(a(u))||parseFloat(a(u))<=0?"Invalid sale price.":!a(p)||isNaN(a(p))||parseFloat(a(p))<=0?"Invalid quantity.":a(b)&&(isNaN(a(b))||parseFloat(a(b))<0)?"Invalid fees.":a(_)&&(isNaN(a(_))||parseFloat(a(_))<0)?"Invalid holding period.":null}function ba(){if(o(x,pa()),a(x))return;const t=new URLSearchParams({initial:a(c),purchase:a(n),sale:a(u),qty:a(p),fees:a(b)||"0",days:a(_)||"0",currency:a(S)});localStorage.setItem("lastCalculation",JSON.stringify({initial:a(c),purchase:a(n),sale:a(u),qty:a(p),fees:a(b)||"0",days:a(_)||"0",currency:a(S)})),Ja(`${ua}/results?${t.toString()}`)}function _a(){localStorage.removeItem("lastCalculation"),alert("Saved calculation cleared.")}Ga();var N=Ka(),H=i(N),J=i(H),$=i(J),L=d(i($),2);{var ga=t=>{var v=Aa(),ha=d(i(v));r(v),j(()=>Fa(ha,` ${a(x)??""}`)),va(3,v,()=>Ra),da(t,v)};Ca(L,t=>{a(x)&&t(ga)})}var w=d(L,2),D=i(w),U=i(D);j(()=>{a(S),ka(()=>{})});var k=i(U);k.value=k.__value="USD";var F=d(k);F.value=F.__value="EUR";var M=d(F);M.value=M.__value="GBP",r(U),y(2),r(D);var C=d(D,2),O=i(C),W=i(O),A=i(W);I(A),y(2),r(W),r(O);var K=d(O,2),Q=i(K),T=i(Q);I(T),y(2),r(Q),r(K),r(C);var R=d(C,2),B=i(R),z=i(B),V=i(z);I(V),y(2),r(z),r(B);var X=d(B,2),Y=i(X),Z=i(Y);I(Z),y(2),r(Y),r(X),r(R);var aa=d(R,2),ea=d(i(aa),2),E=i(ea),ia=i(E),ra=i(ia);I(ra),y(2),r(ia),r(E);var ta=d(E,2),la=i(ta),sa=i(la);I(sa),y(2),r(la),r(ta),r(ea),r(aa),y(2),r(w);var na=d(w,2),oa=i(na),ya=d(oa,2);r(na),r($),r(J),r(H),r(N),j(()=>Ba(oa,"href",`${ua??""}/`)),Ma(U,()=>a(S),t=>o(S,t)),q(A,()=>a(c),t=>o(c,t)),q(T,()=>a(p),t=>o(p,t)),q(V,()=>a(n),t=>o(n,t)),q(Z,()=>a(u),t=>o(u,t)),q(ra,()=>a(b),t=>o(b,t)),q(sa,()=>a(_),t=>o(_,t)),ca("submit",w,Wa(ba)),ca("click",ya,_a),va(1,$,()=>Oa,()=>({y:30,duration:800})),da(e,N),Ua(),h()}export{se as component};
